---
// Features bileşeni için gerekli importlar
import { featureViewModel } from "../../viewmodels/FeatureViewModel";
import { t } from "../../utils/i18n";

// ViewModel üzerinden özellikleri al
const features = featureViewModel.getAllFeatures();

// İkon yollarını almak için yardımcı fonksiyon
function getIconPath(iconName: string): string {
  const iconPaths: Record<string, string> = {
    users:
      "M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z",
    "credit-card":
      "M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z",
    chip: "M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25zm.75-12h9v9h-9v-9z",
    document:
      "M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z",
    "globe-alt":
      "M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418",
    "receipt-percent":
      "M9 14.25l6-6m4.5-3.493V21.75l-3.75-1.5-3.75 1.5-3.75-1.5-3.75 1.5V4.757c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0c1.1.128 1.907 1.077 1.907 2.185zM9.75 9h.008v.008H9.75V9zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm4.125 4.5h.008v.008h-.008V13.5zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z",
    database:
      "M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125",
    "chat-bubble-left-right":
      "M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155",
    cloud:
      "M2.25 15a4.5 4.5 0 004.5 4.5H18a3.75 3.75 0 001.332-7.257 3 3 0 00-3.758-3.848 5.25 5.25 0 00-10.233 2.33A4.502 4.502 0 002.25 15z",
    tag: "M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z M6 6h.008v.008H6V6z",
    "ellipsis-horizontal":
      "M6.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM18.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0z",
  };

  return (
    iconPaths[iconName] ||
    "M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"
  );
}
---

<section id="features" class="py-20 bg-dark">
  <div class="container mx-auto px-4">
    <!-- Başlık kısmı -->
    <div class="text-center mb-16" data-aos="fade-up">
      <h2 class="text-primary text-3xl md:text-4xl font-bold mb-4">
        {t("home.features.title")}
      </h2>
      <p class="text-xl text-body max-w-3xl mx-auto">
        {t("home.features.subtitle")}
      </p>
    </div>

    <!-- Özellikler grid -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {
        features.map((feature, index) => (
          <div
            class="bg-darkest rounded-xl p-6 border border-white-off hover:border-primary hover:shadow-primary/20 hover:shadow-lg transition-all duration-300 feature-card"
            data-aos="fade-up"
            data-aos-delay={100 + index * 50}
          >
            <div class="flex items-center justify-center w-16 h-16 rounded-full bg-primary-rgba-2 mb-6 feature-icon-container">
              <svg
                class="w-8 h-8 text-primary feature-icon"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                  d={getIconPath(feature.icon)}
                />
              </svg>
            </div>
            <h3 class="text-xl font-semibold text-white mb-3 feature-title">
              {feature.title}
            </h3>
            <p class="text-body feature-description">{feature.description}</p>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  // @ts-nocheck
  import AOS from "aos";
  import { gsap } from "gsap";

  document.addEventListener("DOMContentLoaded", () => {
    // AOS Animasyonlarını Başlat
    AOS.init({
      duration: 800,
      once: false,
      mirror: true,
    });

    // GSAP ile özellik kartları için animasyonlar
    const featureCards = document.querySelectorAll(".feature-card");

    featureCards.forEach((card) => {
      const icon = card.querySelector(".feature-icon");
      const title = card.querySelector(".feature-title");
      const description = card.querySelector(".feature-description");
      const iconContainer = card.querySelector(".feature-icon-container");

      // Kart üzerine gelince animasyon
      card.addEventListener("mouseenter", () => {
        gsap.to(icon, {
          rotate: 360,
          scale: 1.2,
          duration: 0.5,
          ease: "back.out(1.7)",
        });

        gsap.to(title, {
          color: "#e25656",
          duration: 0.3,
        });

        gsap.to(iconContainer, {
          backgroundColor: "rgba(201, 52, 52, 0.2)",
          scale: 1.1,
          duration: 0.3,
        });
      });

      // Karttan çıkınca animasyon
      card.addEventListener("mouseleave", () => {
        gsap.to(icon, {
          rotate: 0,
          scale: 1,
          duration: 0.5,
        });

        gsap.to(title, {
          color: "white",
          duration: 0.3,
        });

        gsap.to(iconContainer, {
          backgroundColor: "rgba(201, 52, 52, 0.1)",
          scale: 1,
          duration: 0.3,
        });
      });
    });
  });
</script>
